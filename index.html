<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chinese Word Search</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;700&family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #4a90e2;
            --secondary-color: #f5f5f5;
            --border-color: #ddd;
            --text-color: #333;
            --success-color: #4caf50;
        }
        

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Poppins', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            padding: 20px;
            background-color: #f0f2f5;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .menu {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            max-width: 600px;
            margin: 0 auto;
        }

        .menu h1 {
            text-align: center;
            margin-bottom: 20px;
            color: var(--primary-color);
            font-weight: 600;
        }

        .options-group {
            margin-bottom: 20px;
        }

        .options-group h2 {
            margin-bottom: 10px;
            font-size: 1.2em;
            font-weight: 500;
        }

        .options-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
        }

        button {
            padding: 10px 15px;
            border: 1px solid var(--border-color);
            border-radius: 5px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            font-family: 'Poppins', sans-serif;
            font-weight: 500;
        }

        button:hover {
            background: var(--primary-color);
            color: white;
        }

        button.selected {
            background: var(--primary-color);
            color: white;
        }

        .toggle {
            opacity: 0.6;
        }

        .toggle.selected {
            opacity: 1;
            background: var(--primary-color);
            color: white;
        }

        #startGame:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .game-container {
    display: block;
    max-width: calc(100% - 40px);
    margin: 40px auto 0;
    width: fit-content; /* S'adapte au contenu */
}

@media (max-width: 768px) {
    .container {
        padding: 10px;
        width: 100%;
        max-width: 100%;
    }

    .game-container {
        max-width: 100%;
        margin: 0 auto;
        padding: 0;
    }

    .game-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 20px;
        width: calc(100% - 40px);
        max-width: none;
    }

    .game-header {
        width: calc(100% - 40px);
        max-width: none;
        margin: 0 auto 20px;
    }

    .validation-modal {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 90%;
        max-width: 300px;
        z-index: 1001;
    }

    .word-list {
        width: 100%;
        max-width: calc(100vw - 20px);
        margin: 0 auto;
    }

    .word-item {
        list-style-type: none;
        padding: 12px;
        border-bottom: 1px solid var(--border-color);
        margin: 0;
    }

    .grid-container {
        width: 100%;
        max-width: calc(100vw - 20px);
        margin: 0 auto;
        overflow: auto;
    }

    /* Ajuster la taille des cellules pour le mobile */
    .grid-cell {
        width: 45px;
        height: 45px;
        font-size: 1.5em;
    }
}

        .grid-container {
    background: white;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    width: fit-content;
    margin: auto;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
}

        .word-grid {
            display: grid;
            gap: 5px;
            margin: 0 auto;
        }

        .grid-cell {
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            cursor: pointer;
            user-select: none;
            transition: all 0.3s ease;
            background: white;
            border-radius: 4px;
            font-family: 'Noto Sans SC', sans-serif;
            font-weight: 400;
            border: 1px solid var(--border-color);
        }

        .grid-cell:hover {
            background: var(--secondary-color);
        }

        .grid-cell.selected {
            background: var(--primary-color);
            color: white;
        }

        .grid-cell.found {
    background-color: var(--success-color) !important;
    color: white !important;
}

        .word-list {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            width: 300px;
            display: flex;
            flex-direction: column;
            height: 600px;
        }

        .word-list h2 {
            margin-bottom: 15px;
            color: var(--primary-color);
            font-weight: 500;
            font-size: 1.5em;
        }

        .words {
            flex-grow: 1;
            overflow-y: auto;
            margin-bottom: 15px;
        }

        .word-item {
            padding: 12px;
            border-bottom: 1px solid var(--border-color);
            font-size: 1.5em;
            line-height: 1.4;
            font-family: 'Noto Sans SC', sans-serif;
        }

        .word-item .translation, 
        .word-item .pinyin {
            font-size: 0.85em;
            color: #666;
            display: block;
        }

        .word-item.found {
            background-color: #e8f5e9;
        }

        .status-footer {
            border-top: 1px solid var(--border-color);
            padding-top: 15px;
            background: white;
            margin-top: auto;
        }

        .progress-counter {
            text-align: center;
            font-size: 1.2em;
            font-weight: 500;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .timer {
            text-align: center;
            font-size: 1.2em;
            font-weight: 500;
            color: var(--primary-color);
        }

        .validation-modal, 
        .completion-message {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            z-index: 1000;
            text-align: center;
        }

        .completion-message .stats {
            margin: 15px 0;
            padding: 15px;
            background: #f5f5f5;
            border-radius: 8px;
        }

        .completion-message .time {
            font-size: 1.5em;
            color: var(--primary-color);
            font-weight: 600;
            margin: 10px 0;
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            justify-content: center;
        }

        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 999;
        }

        .game-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: white;
    padding: 15px 20px;
    border-radius: 10px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    margin-bottom: 20px;
    width: 100%; /* Prend toute la largeur du container */
}


.game-title {
    font-size: 1.5em;
    color: var(--primary-color);
    font-weight: 500;
    margin: 0;
    text-align: center;
    flex: 1; /* Permet au titre de prendre l'espace disponible */
}

#backToMenu {
    padding: 8px 15px;
    border: 1px solid var(--border-color);
    border-radius: 5px;
    background: white;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 1rem;
    color: var(--primary-color);
    min-width: 100px; /* Largeur minimale fixe */
}

.game-content {
    display: grid;
    grid-template-columns: auto 300px;
    gap: 20px;
    width: 100%; /* Prend toute la largeur du container */
}

#backToMenu:hover {
    background: var(--primary-color);
    color: white;
}

.header-spacer {
    min-width: 100px; /* Même largeur que le bouton pour équilibrer */
    visibility: hidden; /* Invisible mais garde l'espace */
}

        .words::-webkit-scrollbar {
            width: 8px;
        }

        .words::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }

        .words::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 4px;
        }

        .words::-webkit-scrollbar-thumb:hover {
            background: #357abd;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Menu Screen -->
        <div class="menu" id="menuScreen">
            <h1>中文 Word Search</h1>
            
            <div class="options-group">
                <h2>HSK Levels</h2>
                <div class="options-buttons" id="hskLevelButtons">
                    <button data-level="1" class="toggle selected">HSK 1</button>
                    <button data-level="2" class="toggle">HSK 2</button>
                    <button data-level="3" class="toggle">HSK 3</button>
                    <button data-level="4" class="toggle">HSK 4</button>
                    <button data-level="5" class="toggle">HSK 5</button>
                    <button data-level="6" class="toggle">HSK 6</button>
                </div>
            </div>
    
            <div class="options-group">
                <h2>Game Mode</h2>
                <div class="options-buttons" id="gameModeButtons">
                    <button data-mode="no_hint" class="selected">No Hints</button>
                    <button data-mode="characters">Characters</button>
                    <button data-mode="translation">Translations</button>
                    <button data-mode="pinyin">Pinyin</button>
                </div>
            </div>
    
            <div class="options-group">
                <h2>Grid Size</h2>
                <div class="options-buttons" id="gridSizeButtons">
                    <button data-size="5" class="selected">5x5</button>
                    <button data-size="7">7x7</button>
                    <button data-size="9">9x9</button>
                    <button data-size="11">11x11</button>
                    <button data-size="13">13x13</button>
                </div>
            </div>
    
            <button id="startGame" style="width: 100%; margin-top: 20px;">Start Game</button>
        </div>

        <!-- Game Screen -->
        <div class="game-container" id="gameScreen">
            <button id="backToMenu">← Back to Menu</button>
            
            <div style="display: grid; grid-template-columns: auto 300px; gap: 20px; margin-top: 40px;">
                <div class="grid-container">
                    <div class="word-grid" id="wordGrid"></div>
                </div>
                
                <div class="word-list">
                    <h2>Words to Find</h2>
                    <div class="words" id="wordsList"></div>
                    <div class="status-footer">
                        <div class="progress-counter" id="progressCounter">Found: 0/0</div>
                        <div class="timer" id="gameTimer">00:00</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modals -->
        <div class="validation-modal" id="validationModal">
            <h3>Confirm Selection</h3>
            <p>Selected word: <span id="selectedWord"></span></p>
            <div class="modal-buttons">
                <button id="confirmSelection">Confirm</button>
                <button id="cancelSelection">Cancel</button>
            </div>
        </div>

        <div class="completion-message" id="completionMessage">
            <h3>Congratulations!</h3>
            <p>You found all the words!</p>
            <div class="stats">
                <p>Time taken: <span id="finalTime" class="time">00:00</span></p>
                <p>Words found: <span id="finalWordCount">0</span></p>
            </div>
            <button id="newGameButton" style="margin-top: 15px;">Start New Game</button>
        </div>

        <div class="overlay" id="overlay"></div>
    </div>

    <script>
    // Integrated word lists
    const hsk1Words = [
    { chinese: '爱', pinyin: 'ài', translation: 'love' },
    { chinese: '爱好', pinyin: 'ài hào', translation: 'hobby' },
    { chinese: '八', pinyin: 'bā', translation: 'eight' },
    { chinese: '爸爸', pinyin: 'bàba', translation: 'dad' },
    { chinese: '吧', pinyin: 'ba', translation: '(interjection particle)' },
    { chinese: '白', pinyin: 'bái', translation: 'white' },
    { chinese: '白天', pinyin: 'bái tiān', translation: 'day' },
    { chinese: '百', pinyin: 'bǎi', translation: 'hundred' },
    { chinese: '班', pinyin: 'bān', translation: 'class' },
    { chinese: '半', pinyin: 'bàn', translation: 'half' },
    { chinese: '半年', pinyin: 'bàn nián', translation: 'half a year' },
    { chinese: '半天', pinyin: 'bàn tiān', translation: 'half day' },
    { chinese: '帮', pinyin: 'bāng', translation: 'help' },
    { chinese: '帮忙', pinyin: 'bāng máng', translation: 'help' },
    { chinese: '包', pinyin: 'bāo', translation: 'package' },
    { chinese: '包子', pinyin: 'bāo zi', translation: 'bun' },
    { chinese: '杯', pinyin: 'bēi', translation: 'cup' },
    { chinese: '杯子', pinyin: 'bēi zi', translation: 'cup' },
    { chinese: '北', pinyin: 'běi', translation: 'north' },
    { chinese: '北边', pinyin: 'běi biān', translation: 'North side' },
    { chinese: '北京', pinyin: 'běi jīng', translation: 'Beijing' },
    { chinese: '本', pinyin: 'běn', translation: '(measure word for books or volumes)' },
    { chinese: '本子', pinyin: 'běn zi', translation: 'book' },
    { chinese: '比', pinyin: 'bǐ', translation: 'particle used for comparison' },
    { chinese: '别', pinyin: 'bié', translation: 'Don’t' },
    { chinese: '别的', pinyin: 'bié de', translation: 'other' },
    { chinese: '别人', pinyin: 'bié·rén', translation: 'other people' },
    { chinese: '病', pinyin: 'bìng', translation: 'disease' },
    { chinese: '病人', pinyin: 'bìng rén', translation: 'patient' },
    { chinese: '不大', pinyin: 'bú dà', translation: 'not big' },
    { chinese: '不对', pinyin: 'bú duì', translation: 'wrong' },
    { chinese: '不客气', pinyin: 'bú kè qì', translation: 'You’re welcome' },
    { chinese: '不用', pinyin: 'bú yòng', translation: 'No need to' },
    { chinese: '不', pinyin: 'bù', translation: 'No' },
    { chinese: '菜', pinyin: 'cài', translation: 'dish' },
    { chinese: '茶', pinyin: 'chá', translation: 'tea' },
    { chinese: '差', pinyin: 'chà', translation: 'differ from; bad; short of ' },
    { chinese: '常', pinyin: 'cháng', translation: 'often' },
    { chinese: '常常', pinyin: 'cháng cháng', translation: 'often' },
    { chinese: '唱', pinyin: 'chàng', translation: 'sing' },
    { chinese: '唱歌', pinyin: 'chàng gē', translation: 'sing' },
    { chinese: '车', pinyin: 'chē', translation: 'car' },
    { chinese: '车票', pinyin: 'chē piào', translation: 'ticket' },
    { chinese: '车上', pinyin: 'chē shàng', translation: 'in the car' },
    { chinese: '车站', pinyin: 'chē zhàn', translation: 'station' },
    { chinese: '吃', pinyin: 'chī', translation: 'eat' },
    { chinese: '吃饭', pinyin: 'chī fàn', translation: 'have meal' },
    { chinese: '出', pinyin: 'chū', translation: 'out' },
    { chinese: '出来', pinyin: 'chū lái', translation: 'come' },
    { chinese: '出去', pinyin: 'chū qù', translation: 'go out' },
    { chinese: '穿', pinyin: 'chuān', translation: 'wear' },
    { chinese: '床', pinyin: 'chuáng', translation: 'bed' },
    { chinese: '次', pinyin: 'cì', translation: '(measure word for times, frequency)' },
    { chinese: '从', pinyin: 'cóng', translation: 'from' },
    { chinese: '错', pinyin: 'cuò', translation: 'wrong' },
    { chinese: '打', pinyin: 'dǎ', translation: 'hit, take' },
    { chinese: '打车', pinyin: 'dǎ chē', translation: 'take a taxi' },
    { chinese: '打电话', pinyin: 'dǎ diàn huà', translation: 'make a phonecall' },
    { chinese: '打开', pinyin: 'dǎ kāi', translation: 'turn on' },
    { chinese: '打球', pinyin: 'dǎ qiú', translation: 'play ball' },
    { chinese: '大', pinyin: 'dà', translation: 'large, big' },
    { chinese: '大学', pinyin: 'dà xué', translation: 'university' },
    { chinese: '大学生', pinyin: 'dà xué shēng', translation: 'university student' },
    { chinese: '到', pinyin: 'dào', translation: 'reach' },
    { chinese: '得到', pinyin: 'dé dào', translation: 'get' },
    { chinese: '地', pinyin: 'de', translation: 'auxiliary word' },
    { chinese: '的', pinyin: 'de', translation: '(aux.)' },
    { chinese: '等', pinyin: 'děng', translation: 'wait' },
    { chinese: '地', pinyin: 'dì', translation: 'ground' },
    { chinese: '地点', pinyin: 'dìdiǎn', translation: 'location' },
    { chinese: '地方', pinyin: 'dìfang', translation: 'local' },
    { chinese: '地上', pinyin: 'dì shàng', translation: 'on the ground' },
    { chinese: '地图', pinyin: 'dìtú', translation: 'Map' },
    { chinese: '弟弟', pinyin: 'dì di', translation: 'younger brother' },
    { chinese: '第', pinyin: 'dì', translation: 'auxiliary word for ordinal numbers (second )' },
    { chinese: '点', pinyin: 'diǎn', translation: 'spot' },
    { chinese: '电', pinyin: 'diàn', translation: 'electricity' },
    { chinese: '电话', pinyin: 'diàn huà', translation: 'phone' },
    { chinese: '电脑', pinyin: 'diànnǎo', translation: 'Computer' },
    { chinese: '电视', pinyin: 'diànshì', translation: 'television' },
    { chinese: '电视机', pinyin: 'diàn shì jī', translation: 'television' },
    { chinese: '电影', pinyin: 'diànyǐng', translation: 'Film' },
    { chinese: '电影院', pinyin: 'diàn yǐng yuàn', translation: 'cinema; movie theater' },
    { chinese: '东', pinyin: 'dōng', translation: 'east' },
    { chinese: '东边', pinyin: 'dōng biān', translation: 'east side' },
    { chinese: '东西', pinyin: 'dōngxi', translation: 'thing' },
    { chinese: '动', pinyin: 'dòng', translation: 'move' },
    { chinese: '动作', pinyin: 'dòngzuò', translation: 'action' },
    { chinese: '都', pinyin: 'dōu', translation: 'all' },
    { chinese: '读', pinyin: 'dú', translation: 'read' },
    { chinese: '读书', pinyin: 'dú shū', translation: 'reading; study' },
    { chinese: '对', pinyin: 'duì', translation: 'right' },
    { chinese: '对不起', pinyin: 'duìbuqǐ', translation: 'I’m sorry.' },
    { chinese: '多', pinyin: 'duō', translation: 'many; much; more' },
    { chinese: '多少', pinyin: 'duōshao', translation: 'how much' },
    { chinese: '饿', pinyin: 'è', translation: 'hungry' },
    { chinese: '儿子', pinyin: 'érzi', translation: 'Son' },
    { chinese: '二', pinyin: 'èr', translation: 'Two' },
    { chinese: '饭', pinyin: 'fàn', translation: 'rice; meal' },
    { chinese: '饭店', pinyin: 'fàndiàn', translation: 'restaurant' },
    { chinese: '房间', pinyin: 'fángjiān', translation: 'Room' },
    { chinese: '房子', pi
